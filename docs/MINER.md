# LogicNet: Miner documentation

### Overview

The Miner is responsible for solving the challenges generated by the Validator. The Miner will receive the challenges from the Validator, solve them, and submit the solutions back to the Validator. The Miner will be rewarded based on the number of challenges solved and the quality of the solutions.

**Miner is free to customize the solution**. We provide a default simple solution for the miner to start with. Miner can use the vLLM server to generate the solution.

**Protocol**: `LogicSynapse`. 
- Miner will be provided:
    - `logic_question`: The challenge generated by the Validator.
- Miner have to fill following content in the synapse to submit the solution:
    - `logic_reasoning`: The step by step reasoning to solve the challenge.
    - `logic_answer`: The final answer of the challenge as a short sentence.

**Reward Structure**:
- `correctness (bool)`: Validator ask LLM to check the matching between `logic_answer` and the ground truth.
- `similarity (float)`: Validator compute cosine similarity between `logic_reasoning` and validator's reasoning.
- `time_penalty (float)`: Penalty for late submission. It's ratio of `process_time / timeout * MAX_PENALTY`.

### Minimum Compute Requirements
- 1x GPU 24G (RTX 4090, A100, A6000, etc)
- Storage: 100GB

### Setup for Miner
1. Git clone the repository
```bash
git clone xxx
```
2. Install the requirements
```bash
pip install -e .
pip uninstall uvloop -y
```
3. Setup LLM Configuration
- Self host a vLLM server
```bash
vllm serve Qwen/Qwen2-7B-Instruct --port vllm-port --host vllm-host # change port and host to your preference
```
4. Change `*_BASE_URL`, `*_KEY` in `set_env.sh` file to connect to vLLM
```bash
MINER_BASE_URL=http://vllm-host:vllm-port/v1
MINER_MODEL="Qwen/Qwen2-7B-Instruct"
MINER_KEY="xxx"
```
5. Create `.env` file
```bash
. set_env.sh
```
6. Run the following command to start the validator
```bash
pm2 start python --name "sn35-miner" -- neurons/miner/miner.py \
--netuid 35 --wallet.name "wallet-name" --wallet.hotkey "wallet-hotkey" \
--subtensor.network finney \
--miner.category Logic \ # specify the category to join. Currently, only Logic is supported
--miner.epoch_volume 50 \ # commit no of requests to be solved in an epoch. It will affect the reward calculation
```


